<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8"/>
		<title>Insert title here</title>
		<script src="../../js/jquery.js"></script>
		<script src="../../js/websocket/sockjs.min.js"></script>
		<script src="../../js/websocket/storm.js"></script>
		<script type="text/javascript">
			
			function init() {
				var socket = new SockJS("/portfolio");
				var stompClient = Stomp.over(socket);

				stompClient.connect({}, function(frame) {
					stompClient.subscribe("/app/positions", function (message) {
	                    alert(JSON.parse(message.body));
	                });
					
					stompClient.subscribe("/user/queue/position-updates", function(message) {
						alert(JSON.parse(message.body));
					});
					
					stompClient.subscribe("/topic/greetings", function(message) {
						alert(JSON.parse(message.body));
					});
				});
			}
			
			function test() {
				
				$.ajax({
				    type: 'POST',
				    url: 'greetings',
				    async: false,
				    dataType: 'json',
				    
				    success: function (data) {
				    
					      if (data != null) {
					    	  
					    	  alert("ew");
					      }
				    }
				});
			}
		</script>
	</head>
	<body onload="init()">
		<div class="msgcount">
			<button value="hehe" onclick="test()"></button>
		</div>
	</body>
</html>